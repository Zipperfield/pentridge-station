<%= form_with model: @event, local: true do |f|%>
  <h3 class="text-5xl">Request to Book</h3>
  <%= render 'events/form/errors'%>
  <div>
    <%= f.label 'Date' %>
    <%= f.date_field :date, min: Date.today, required: true%>
  </div>
  <div>
    <%= f.label 'Start Time' %>
    <%= f.select :start_time, options_for_select(@event.hourly_choices(1,23)), required: true%>
  </div>
  <div>
    <%= f.label 'End Time' %>
    <%= f.select :end_time, options_for_select(@event.hourly_choices(1,23)), required: true%>
  </div>
  <div>
    <%= f.label 'Event Type' %>
    <%= f.select :event_type, options_for_select(Event.event_types), required: true%>
  </div>
  <div>
    <%= f.label 'Number Attendees' %>
    <%= f.select :num_attendees, options_for_select(Event.num_attendees), required: true%>
  </div>
  <%= render 'events/form/contact', f: f%>
  <div class="flex">
    <%= f.fields_for :preferences do |c| %>
      <div class="">
        <% if c.object.vendor?%>
          <% choices = @vendor_choices%>
          <div>
            <span id="vendor_partnership"> I would like to request to book a Pentridge Station food vendor partner.</span>
            <%= f.check_box :vendor_partnership, checked: true %>
          </div>
          <div id="vendor_partnership_form" class="flex flex-col">
            <%= c.hidden_field :preference_type , value: "vendor" %>
          <% elsif c.object.musician? %>
            <% choices = @musician_choices%>
            <div>
              <span id="muscian_partnership"> I would like to request to book a Pentridge Station music partner.</span>
              <%= f.check_box :musician_partnership, checked: true %>
            </div>
            <div id="musician_partnership_form" class="flex flex-col">
              <%= c.hidden_field :preference_type , value: "musician" %>
            <% end %>
            <div>
              <%= c.label 'First Choice' %>
              <%= c.select :first_choice_id, options_for_select(choices, choices.first)%>
            </div>
            <div>
              <%= c.label 'Second Choice' %>
              <%= c.select :second_choice_id, options_for_select(choices, choices.second) %>
            </div>
            <div>
              <%= c.label 'Third Choice' %>
              <%= c.select :third_choice_id, options_for_select(choices, choices.third) %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
    <div>
      <%= f.submit "SUBMIT", class: "btn btn-primary" %>
    </div>
  <% end %>
